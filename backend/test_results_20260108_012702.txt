======================================================== 
 SMART ENTERPRISE SUITE - BACKEND TEST REPORT 
 Timestamp: 20260108_012702 
======================================================== 
 
[1/3] Running General Integration Tests (integration.test.js)... 
-------------------------------------------------------- 
  console.log
    [MetricsCache] Initializing metrics cache...

      at Object.log [as initializeCache] (services/metricsCache.js:308:17)

  console.log
    [MetricsCache] Starting metrics calculation...

      at log (services/metricsCache.js:50:13)

{"level":30,"time":"2026-01-07T23:27:07.437Z","name":"cs-dept-console","pid":31228,"hostname":"MKamel","env":"test","context":"Prisma","msg":"Starting a sqlite pool with 9 connections."}
{"level":30,"time":"2026-01-07T23:27:07.551Z","name":"cs-dept-console","pid":31228,"hostname":"MKamel","env":"test","req":{"id":2,"method":"GET","url":"/api/dashboard","query":{},"params":{},"headers":{"host":"127.0.0.1:64812","accept-encoding":"gzip, deflate","connection":"close"},"remoteAddress":"::ffff:127.0.0.1","remotePort":64813},"res":{"statusCode":200,"headers":{"content-security-policy":"default-src 'self';script-src 'self' 'unsafe-inline';style-src 'self' 'unsafe-inline';img-src 'self' data: https:;connect-src 'self';font-src 'self';object-src 'none';media-src 'self';frame-src 'self';base-uri 'self';form-action 'self';frame-ancestors 'self';script-src-attr 'none';upgrade-insecure-requests","cross-origin-embedder-policy":"require-corp","cross-origin-opener-policy":"same-origin","cross-origin-resource-policy":"cross-origin","origin-agent-cluster":"?1","referrer-policy":"strict-origin-when-cross-origin","strict-transport-security":"max-age=31536000; includeSubDomains; preload","x-content-type-options":"nosniff","x-dns-prefetch-control":"off","x-download-options":"noopen","x-frame-options":"DENY","x-permitted-cross-domain-policies":"none","x-xss-protection":"0","vary":"Origin","access-control-allow-credentials":"true","ratelimit-policy":"100;w=900","ratelimit-limit":"100","ratelimit-remaining":"99","ratelimit-reset":"900","content-type":"application/json; charset=utf-8","content-length":"312","etag":"W/\"138-3ioUDngPhLxTFcjyYslZGs1wJl4\""}},"responseTime":25,"msg":"GET / 200"}
  console.log
    [MetricsCache] Metrics calculated in 420ms

      at log (services/metricsCache.js:230:17)

  console.log
    [MetricsCache] Cache initialized successfully

      at Object.log [as initializeCache] (services/metricsCache.js:310:17)

{"level":30,"time":"2026-01-07T23:27:07.587Z","name":"cs-dept-console","pid":31228,"hostname":"MKamel","env":"test","req":{"id":3,"method":"GET","url":"/api/machines","query":{},"params":{},"headers":{"host":"127.0.0.1:64814","accept-encoding":"gzip, deflate","connection":"close"},"remoteAddress":"::ffff:127.0.0.1","remotePort":64815},"res":{"statusCode":200,"headers":{"content-security-policy":"default-src 'self';script-src 'self' 'unsafe-inline';style-src 'self' 'unsafe-inline';img-src 'self' data: https:;connect-src 'self';font-src 'self';object-src 'none';media-src 'self';frame-src 'self';base-uri 'self';form-action 'self';frame-ancestors 'self';script-src-attr 'none';upgrade-insecure-requests","cross-origin-embedder-policy":"require-corp","cross-origin-opener-policy":"same-origin","cross-origin-resource-policy":"cross-origin","origin-agent-cluster":"?1","referrer-policy":"strict-origin-when-cross-origin","strict-transport-security":"max-age=31536000; includeSubDomains; preload","x-content-type-options":"nosniff","x-dns-prefetch-control":"off","x-download-options":"noopen","x-frame-options":"DENY","x-permitted-cross-domain-policies":"none","x-xss-protection":"0","vary":"Origin","access-control-allow-credentials":"true","ratelimit-policy":"100;w=900","ratelimit-limit":"100","ratelimit-remaining":"98","ratelimit-reset":"900","content-type":"application/json; charset=utf-8","content-length":"2","etag":"W/\"2-l9Fw4VUO7kr8CvBlt4zaMCqXZ0w\""}},"responseTime":12,"msg":"GET /machines 200"}
{"level":30,"time":"2026-01-07T23:27:07.607Z","name":"cs-dept-console","pid":31228,"hostname":"MKamel","env":"test","req":{"id":4,"method":"GET","url":"/api/customers/lite","query":{},"params":{},"headers":{"host":"127.0.0.1:64816","accept-encoding":"gzip, deflate","connection":"close"},"remoteAddress":"::ffff:127.0.0.1","remotePort":64817},"res":{"statusCode":200,"headers":{"content-security-policy":"default-src 'self';script-src 'self' 'unsafe-inline';style-src 'self' 'unsafe-inline';img-src 'self' data: https:;connect-src 'self';font-src 'self';object-src 'none';media-src 'self';frame-src 'self';base-uri 'self';form-action 'self';frame-ancestors 'self';script-src-attr 'none';upgrade-insecure-requests","cross-origin-embedder-policy":"require-corp","cross-origin-opener-policy":"same-origin","cross-origin-resource-policy":"cross-origin","origin-agent-cluster":"?1","referrer-policy":"strict-origin-when-cross-origin","strict-transport-security":"max-age=31536000; includeSubDomains; preload","x-content-type-options":"nosniff","x-dns-prefetch-control":"off","x-download-options":"noopen","x-frame-options":"DENY","x-permitted-cross-domain-policies":"none","x-xss-protection":"0","vary":"Origin","access-control-allow-credentials":"true","ratelimit-policy":"100;w=900","ratelimit-limit":"100","ratelimit-remaining":"97","ratelimit-reset":"900","content-type":"application/json; charset=utf-8","content-length":"2","etag":"W/\"2-l9Fw4VUO7kr8CvBlt4zaMCqXZ0w\""}},"responseTime":7,"msg":"GET /lite 200"}
{"level":30,"time":"2026-01-07T23:27:07.629Z","name":"cs-dept-console","pid":31228,"hostname":"MKamel","env":"test","req":{"id":5,"method":"GET","url":"/api/technicians","query":{},"params":{},"headers":{"host":"127.0.0.1:64818","accept-encoding":"gzip, deflate","connection":"close"},"remoteAddress":"::ffff:127.0.0.1","remotePort":64819},"res":{"statusCode":200,"headers":{"content-security-policy":"default-src 'self';script-src 'self' 'unsafe-inline';style-src 'self' 'unsafe-inline';img-src 'self' data: https:;connect-src 'self';font-src 'self';object-src 'none';media-src 'self';frame-src 'self';base-uri 'self';form-action 'self';frame-ancestors 'self';script-src-attr 'none';upgrade-insecure-requests","cross-origin-embedder-policy":"require-corp","cross-origin-opener-policy":"same-origin","cross-origin-resource-policy":"cross-origin","origin-agent-cluster":"?1","referrer-policy":"strict-origin-when-cross-origin","strict-transport-security":"max-age=31536000; includeSubDomains; preload","x-content-type-options":"nosniff","x-dns-prefetch-control":"off","x-download-options":"noopen","x-frame-options":"DENY","x-permitted-cross-domain-policies":"none","x-xss-protection":"0","vary":"Origin","access-control-allow-credentials":"true","ratelimit-policy":"100;w=900","ratelimit-limit":"100","ratelimit-remaining":"96","ratelimit-reset":"900","content-type":"application/json; charset=utf-8","content-length":"675","etag":"W/\"2a3-jUn/+OH/B4TFC0I43hB0Kdc2mlw\""}},"responseTime":8,"msg":"GET / 200"}
{"level":30,"time":"2026-01-07T23:27:07.650Z","name":"cs-dept-console","pid":31228,"hostname":"MKamel","env":"test","req":{"id":6,"method":"GET","url":"/api/machine-workflow/kanban","query":{},"params":{},"headers":{"host":"127.0.0.1:64820","accept-encoding":"gzip, deflate","connection":"close"},"remoteAddress":"::ffff:127.0.0.1","remotePort":64821},"res":{"statusCode":200,"headers":{"content-security-policy":"default-src 'self';script-src 'self' 'unsafe-inline';style-src 'self' 'unsafe-inline';img-src 'self' data: https:;connect-src 'self';font-src 'self';object-src 'none';media-src 'self';frame-src 'self';base-uri 'self';form-action 'self';frame-ancestors 'self';script-src-attr 'none';upgrade-insecure-requests","cross-origin-embedder-policy":"require-corp","cross-origin-opener-policy":"same-origin","cross-origin-resource-policy":"cross-origin","origin-agent-cluster":"?1","referrer-policy":"strict-origin-when-cross-origin","strict-transport-security":"max-age=31536000; includeSubDomains; preload","x-content-type-options":"nosniff","x-dns-prefetch-control":"off","x-download-options":"noopen","x-frame-options":"DENY","x-permitted-cross-domain-policies":"none","x-xss-protection":"0","vary":"Origin","access-control-allow-credentials":"true","ratelimit-policy":"100;w=900","ratelimit-limit":"100","ratelimit-remaining":"95","ratelimit-reset":"900","content-type":"application/json; charset=utf-8","content-length":"2","etag":"W/\"2-l9Fw4VUO7kr8CvBlt4zaMCqXZ0w\""}},"responseTime":7,"msg":"GET /kanban 200"}
PASS tests/integration.test.js
  Backend Integration API
    âˆš GET /health returns 200 (188 ms)
    âˆš GET /api/dashboard returns structured data (55 ms)
    âˆš GET /api/machines returns array (29 ms)
    âˆš GET /api/customers/lite returns simplified list (20 ms)
    âˆš GET /api/technicians returns list (20 ms)
    âˆš GET /api/machine-workflow/kanban returns board data (20 ms)

Test Suites: 1 passed, 1 total
Tests:       6 passed, 6 total
Snapshots:   0 total
Time:        3.733 s, estimated 4 s
Ran all test suites matching tests/integration.test.js.

Jest has detected the following 1 open handle potentially keeping Jest from exiting:

  â—  Timeout

    [0m [90m 317 |[39m
     [90m 318 |[39m [90m// Refresh metrics cache every 5 minutes[39m
    [31m[1m>[22m[39m[90m 319 |[39m cron[33m.[39mschedule([32m'*/5 * * * *'[39m[33m,[39m [36masync[39m () [33m=>[39m {
     [90m     |[39m      [31m[1m^[22m[39m
     [90m 320 |[39m   logger[33m.[39mdebug([32m'Refreshing metrics cache...'[39m)[33m;[39m
     [90m 321 |[39m   [36mtry[39m {
     [90m 322 |[39m     [36mawait[39m metricsCache[33m.[39mcalculateAllMetrics()[33m;[39m[0m

      at Runner.start (node_modules/node-cron/src/scheduler/runner.ts:167:29)
      at InlineScheduledTask.start (node_modules/node-cron/src/tasks/inline-scheduled-task.ts:89:19)
      at Object.schedule (node_modules/node-cron/src/node-cron.ts:46:10)
      at Object.schedule (server.js:319:6)
      at Object.require (tests/integration.test.js:21:17)

  PASS 
 
[2/3] Running Transfer Service Tests (transferService.test.js)... 
-------------------------------------------------------- 
FAIL tests/transferService.test.js
  transferService
    createTransferOrder
      Ã— should create a transfer order within a transaction (10 ms)
      Ã— should rollback if an error occurs during creation (26 ms)
    receiveTransferOrder
      Ã— should receive a transfer order within a transaction (3 ms)
      Ã— should throw if order not found (11 ms)
      Ã— should rollback if an error occurs during reception (10 ms)
    rejectOrder
      Ã— should reject a transfer order within a transaction (2 ms)
      âˆš should throw if order not found for rejection (2 ms)
      Ã— should rollback if an error occurs during rejection (7 ms)
    cancelOrder
      Ã— should cancel a transfer order within a transaction (2 ms)
      âˆš should throw if order not found for cancellation (1 ms)
      Ã— should rollback if an error occurs during cancellation (9 ms)

  â— transferService â€º createTransferOrder â€º should create a transfer order within a transaction

    Ø¸â€žØ·Â§ Ø·Ú¾Ø¸Ë†Ø·Â¬Ø·Â¯ Ø·Â£Ø·ÂµØ¸â€ Ø·Â§Ø¸Ù¾ Ø¸â€žØ¸â€žØ·Ú¾Ø·Â­Ø¸Ë†Ø¸Ù¹Ø¸â€ž

    [0m [90m 69 |[39m
     [90m 70 |[39m     [36mif[39m ([33m![39mvalidation[33m.[39mvalid) {
    [31m[1m>[22m[39m[90m 71 |[39m         [36mconst[39m err [33m=[39m [36mnew[39m [33mError[39m(validation[33m.[39merrors[33m.[39mjoin([32m'\n'[39m))[33m;[39m
     [90m    |[39m                     [31m[1m^[22m[39m
     [90m 72 |[39m         err[33m.[39mstatus [33m=[39m [35m400[39m[33m;[39m
     [90m 73 |[39m         [36mthrow[39m err[33m;[39m
     [90m 74 |[39m     }[0m

      at createTransferOrder (services/transferService.js:71:21)
      at Object.<anonymous> (tests/transferService.test.js:108:28)

  â— transferService â€º createTransferOrder â€º should rollback if an error occurs during creation

    expect(received).rejects.toThrow(expected)

    Expected substring: "Database error"
    Received message:   "Ø¸â€žØ·Â§ Ø·Ú¾Ø¸Ë†Ø·Â¬Ø·Â¯ Ø·Â£Ø·ÂµØ¸â€ Ø·Â§Ø¸Ù¾ Ø¸â€žØ¸â€žØ·Ú¾Ø·Â­Ø¸Ë†Ø¸Ù¹Ø¸â€ž"

        [0m [90m 69 |[39m
         [90m 70 |[39m     [36mif[39m ([33m![39mvalidation[33m.[39mvalid) {
        [31m[1m>[22m[39m[90m 71 |[39m         [36mconst[39m err [33m=[39m [36mnew[39m [33mError[39m(validation[33m.[39merrors[33m.[39mjoin([32m'\n'[39m))[33m;[39m
         [90m    |[39m                     [31m[1m^[22m[39m
         [90m 72 |[39m         err[33m.[39mstatus [33m=[39m [35m400[39m[33m;[39m
         [90m 73 |[39m         [36mthrow[39m err[33m;[39m
         [90m 74 |[39m     }[0m

      at createTransferOrder (services/transferService.js:71:21)
      at Object.<anonymous> (tests/transferService.test.js:146:13)
      at Object.toThrow (node_modules/expect/build/index.js:2155:20)
      at Object.toThrow (tests/transferService.test.js:146:80)

  â— transferService â€º receiveTransferOrder â€º should receive a transfer order within a transaction

    TypeError: tx.transferOrder.updateMany is not a function

    [0m [90m 213 |[39m
     [90m 214 |[39m         [90m// Update order status - RULE 1[39m
    [31m[1m>[22m[39m[90m 215 |[39m         [36mawait[39m tx[33m.[39mtransferOrder[33m.[39mupdateMany({
     [90m     |[39m                                [31m[1m^[22m[39m
     [90m 216 |[39m             where[33m:[39m {
     [90m 217 |[39m                 id[33m:[39m orderId[33m,[39m
     [90m 218 |[39m                 branchId[33m:[39m order[33m.[39mbranchId [33m||[39m { not[33m:[39m [36mnull[39m }[0m

      at updateMany (services/transferService.js:215:32)
      at Object.<anonymous> (tests/transferService.test.js:209:24)
      at receiveTransferOrder (services/transferService.js:208:5)
      at Object.<anonymous> (tests/transferService.test.js:213:28)

  â— transferService â€º receiveTransferOrder â€º should throw if order not found

    expect(received).rejects.toThrow(expected)

    Expected substring: "Ø·Â§Ø¸â€žØ·Â¥Ø·Â°Ø¸â€  Ø·Ø›Ø¸Ù¹Ø·Â± Ø¸â€¦Ø¸Ë†Ø·Â¬Ø¸Ë†Ø·Â¯"
    Received message:   "Ø·Â§Ø¸â€žØ·Â¥Ø·Â°Ø¸â€  Ø¸â€žØ¸Ù¹Ø·Â³ Ø¸Ù¾Ø¸Ù¹ Ø·Â­Ø·Â§Ø¸â€žØ·Â© Ø·Â§Ø¸â€ Ø·Ú¾Ø·Â¸Ø·Â§Ø·Â±"

        [0m [90m 198 |[39m
         [90m 199 |[39m     [36mif[39m (order[33m.[39mstatus [33m!==[39m [32m'PENDING'[39m) {
        [31m[1m>[22m[39m[90m 200 |[39m         [36mconst[39m err [33m=[39m [36mnew[39m [33mError[39m([32m'Ø·Â§Ø¸â€žØ·Â¥Ø·Â°Ø¸â€  Ø¸â€žØ¸Ù¹Ø·Â³ Ø¸Ù¾Ø¸Ù¹ Ø·Â­Ø·Â§Ø¸â€žØ·Â© Ø·Â§Ø¸â€ Ø·Ú¾Ø·Â¸Ø·Â§Ø·Â±'[39m)[33m;[39m
         [90m     |[39m                     [31m[1m^[22m[39m
         [90m 201 |[39m         err[33m.[39mstatus [33m=[39m [35m400[39m[33m;[39m
         [90m 202 |[39m         [36mthrow[39m err[33m;[39m
         [90m 203 |[39m     }[0m

      at receiveTransferOrder (services/transferService.js:200:21)
      at Object.<anonymous> (tests/transferService.test.js:224:13)
      at Object.toThrow (node_modules/expect/build/index.js:2155:20)
      at Object.toThrow (tests/transferService.test.js:224:87)

  â— transferService â€º receiveTransferOrder â€º should rollback if an error occurs during reception

    expect(received).rejects.toThrow(expected)

    Expected substring: "DB update error"
    Received message:   "tx.transferOrder.updateMany is not a function"

        [0m [90m 213 |[39m
         [90m 214 |[39m         [90m// Update order status - RULE 1[39m
        [31m[1m>[22m[39m[90m 215 |[39m         [36mawait[39m tx[33m.[39mtransferOrder[33m.[39mupdateMany({
         [90m     |[39m                                [31m[1m^[22m[39m
         [90m 216 |[39m             where[33m:[39m {
         [90m 217 |[39m                 id[33m:[39m orderId[33m,[39m
         [90m 218 |[39m                 branchId[33m:[39m order[33m.[39mbranchId [33m||[39m { not[33m:[39m [36mnull[39m }[0m

      at updateMany (services/transferService.js:215:32)
      at Object.<anonymous> (tests/transferService.test.js:60:64)
      at receiveTransferOrder (services/transferService.js:208:5)
      at Object.<anonymous> (tests/transferService.test.js:244:13)
      at Object.toThrow (node_modules/expect/build/index.js:2155:20)
      at Object.toThrow (tests/transferService.test.js:244:87)

  â— transferService â€º rejectOrder â€º should reject a transfer order within a transaction

    TypeError: tx.warehouseMachine.findFirst is not a function

    [0m [90m 564 |[39m         [36mif[39m (orderWithItems[33m.[39mtype [33m===[39m [32m'MACHINE'[39m [33m||[39m orderWithItems[33m.[39mtype [33m===[39m [32m'MAINTENANCE'[39m) {
     [90m 565 |[39m             [36mfor[39m ([36mconst[39m serial [36mof[39m serialNumbers) {
    [31m[1m>[22m[39m[90m 566 |[39m                 [36mconst[39m machine [33m=[39m [36mawait[39m tx[33m.[39mwarehouseMachine[33m.[39mfindFirst({
     [90m     |[39m                                                           [31m[1m^[22m[39m
     [90m 567 |[39m                     where[33m:[39m { serialNumber[33m:[39m serial[33m,[39m branchId[33m:[39m { not[33m:[39m [36mnull[39m } }
     [90m 568 |[39m                 })[33m;[39m
     [90m 569 |[39m                 [36mconst[39m st [33m=[39m machine[33m?[39m[33m.[39mstatus[33m;[39m[0m

      at findFirst (services/transferService.js:566:59)
      at Object.callback (tests/transferService.test.js:60:70)
      at $transaction (services/transferService.js:563:14)
      at Object.<anonymous> (tests/transferService.test.js:281:28)

  â— transferService â€º rejectOrder â€º should rollback if an error occurs during rejection

    expect(received).rejects.toThrow(expected)

    Expected substring: "Rejection DB error"
    Received message:   "tx.warehouseMachine.findFirst is not a function"

        [0m [90m 564 |[39m         [36mif[39m (orderWithItems[33m.[39mtype [33m===[39m [32m'MACHINE'[39m [33m||[39m orderWithItems[33m.[39mtype [33m===[39m [32m'MAINTENANCE'[39m) {
         [90m 565 |[39m             [36mfor[39m ([36mconst[39m serial [36mof[39m serialNumbers) {
        [31m[1m>[22m[39m[90m 566 |[39m                 [36mconst[39m machine [33m=[39m [36mawait[39m tx[33m.[39mwarehouseMachine[33m.[39mfindFirst({
         [90m     |[39m                                                           [31m[1m^[22m[39m
         [90m 567 |[39m                     where[33m:[39m { serialNumber[33m:[39m serial[33m,[39m branchId[33m:[39m { not[33m:[39m [36mnull[39m } }
         [90m 568 |[39m                 })[33m;[39m
         [90m 569 |[39m                 [36mconst[39m st [33m=[39m machine[33m?[39m[33m.[39mstatus[33m;[39m[0m

      at findFirst (services/transferService.js:566:59)
      at Object.callback (tests/transferService.test.js:60:70)
      at $transaction (services/transferService.js:563:14)
      at Object.<anonymous> (tests/transferService.test.js:336:13)
      at Object.toThrow (node_modules/expect/build/index.js:2155:20)
      at Object.toThrow (tests/transferService.test.js:336:78)

  â— transferService â€º cancelOrder â€º should cancel a transfer order within a transaction

    TypeError: tx.transferOrder.updateMany is not a function

    [0m [90m 645 |[39m         }
     [90m 646 |[39m
    [31m[1m>[22m[39m[90m 647 |[39m         [36mawait[39m tx[33m.[39mtransferOrder[33m.[39mupdateMany({
     [90m     |[39m                                [31m[1m^[22m[39m
     [90m 648 |[39m             where[33m:[39m {
     [90m 649 |[39m                 id[33m,[39m
     [90m 650 |[39m                 branchId[33m:[39m order[33m.[39mbranchId[0m

      at updateMany (services/transferService.js:647:32)
      at Object.<anonymous> (tests/transferService.test.js:60:64)
      at cancelOrder (services/transferService.js:639:5)
      at Object.<anonymous> (tests/transferService.test.js:372:13)

  â— transferService â€º cancelOrder â€º should rollback if an error occurs during cancellation

    expect(received).rejects.toThrow(expected)

    Expected substring: "Cancellation DB error"
    Received message:   "tx.transferOrder.updateMany is not a function"

        [0m [90m 645 |[39m         }
         [90m 646 |[39m
        [31m[1m>[22m[39m[90m 647 |[39m         [36mawait[39m tx[33m.[39mtransferOrder[33m.[39mupdateMany({
         [90m     |[39m                                [31m[1m^[22m[39m
         [90m 648 |[39m             where[33m:[39m {
         [90m 649 |[39m                 id[33m,[39m
         [90m 650 |[39m                 branchId[33m:[39m order[33m.[39mbranchId[0m

      at updateMany (services/transferService.js:647:32)
      at Object.callback (tests/transferService.test.js:60:70)
      at $transaction (services/transferService.js:639:14)
      at Object.<anonymous> (tests/transferService.test.js:446:13)
      at Object.toThrow (node_modules/expect/build/index.js:2155:20)
      at Object.toThrow (tests/transferService.test.js:446:74)

Test Suites: 1 failed, 1 total
Tests:       9 failed, 2 passed, 11 total
Snapshots:   0 total
Time:        1.494 s
Ran all test suites matching tests/transferService.test.js.
  FAIL 
 
[3/3] Running Transfer Smoke Tests (transferService.smoke2.test.js)... 
-------------------------------------------------------- 
FAIL tests/transferService.smoke2.test.js
  transferService smoke flows
    Ã— creates a SIM transfer order (5 ms)
    âˆš imports from excel requires buffer (4 ms)

  â— transferService smoke flows â€º creates a SIM transfer order

    TypeError: db.warehouseSim.findMany is not a function

    [0m [90m 114 |[39m     } [36melse[39m [36mif[39m (type [33m===[39m [32m'SIM'[39m) {
     [90m 115 |[39m         [90m// Validate SIMs[39m
    [31m[1m>[22m[39m[90m 116 |[39m         [36mconst[39m sims [33m=[39m [36mawait[39m db[33m.[39mwarehouseSim[33m.[39mfindMany({
     [90m     |[39m                                            [31m[1m^[22m[39m
     [90m 117 |[39m             where[33m:[39m {
     [90m 118 |[39m                 serialNumber[33m:[39m { [36min[39m[33m:[39m serialNumbers }
     [90m 119 |[39m             }[33m,[39m[0m

      at findMany (utils/transfer-validators.js:116:44)
      at validateTransferOrder (utils/transfer-validators.js:278:24)
      at createTransferOrder (services/transferService.js:68:24)
      at Object.<anonymous> (tests/transferService.smoke2.test.js:27:23)

Test Suites: 1 failed, 1 total
Tests:       1 failed, 1 passed, 2 total
Snapshots:   0 total
Time:        0.945 s, estimated 1 s
Ran all test suites matching tests/transferService.smoke2.test.js.
  FAIL 
 
======================================================== 
 TEST RUN COMPLETE 
======================================================== 
